{% extends 'base.html.twig' %}

{% block title %}Inscription - SchoolFlow{% endblock %}

{% block stylesheets %}
<style type="text/tailwindcss">
    .neon-accent {
        filter: drop-shadow(0 0 8px rgba(138, 44, 226, 0.8));
    }
    .button-glow {
        box-shadow: 0 0 20px 0px rgba(138, 44, 226, 0.3);
    }
    .border-b-focus {
        transition: border-color 0.3s ease;
    }
    .border-b-focus:focus {
        border-bottom-color: #8a2ce2;
        outline: none;
    }
    .bg-desk-overlay {
        background: linear-gradient(to right, rgba(10, 10, 12, 0.4), rgba(10, 10, 12, 0.1));
    }
    /* Hide default layout for full screen */
    nav {
        display: none !important;
    }
    main {
        padding: 0 !important;
    }
    .mx-auto.max-w-7xl {
        max-width: none !important;
        padding: 0 !important;
    }
</style>
{% endblock %}

{% block body %}
<div class="flex flex-col md:flex-row min-h-screen bg-dark-gray text-white overflow-hidden">
    {# Left side - Image #}
    <div class="relative hidden md:flex w-1/2 flex-col justify-between p-8 md:p-16 overflow-hidden transition-all duration-1000 ease-out -translate-x-full opacity-0" id="register-image-side">
        <div class="absolute inset-0 z-0">
            <img src="https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?auto=format&fit=crop&q=80&w=2070" 
                 alt="Campus moderne" class="w-full h-full object-cover brightness-75"/>
            <div class="absolute inset-0 bg-gradient-to-t from-dark-gray via-dark-gray/80 to-transparent opacity-90"></div>
        </div>

        <div class="relative z-10 flex items-center space-x-3 mb-12">
            <div class="w-10 h-10 bg-primary rounded flex items-center justify-center shadow-lg transform hover:rotate-12 transition-transform duration-300">
                <i data-lucide="graduation-cap" class="text-white w-6 h-6"></i>
            </div>
            <span class="text-xl font-bold tracking-widest uppercase">Akane</span>
        </div>

        <div class="relative z-10 mt-auto">
            <h1 class="text-5xl md:text-7xl font-light leading-tight mb-8">
                Façonner le <br />
                <span class="font-semibold relative inline-block group">
                    futur de <br /> l'éducation.
                    <span class="absolute bottom-0 left-0 w-0 h-1 bg-primary group-hover:w-full transition-all duration-500"></span>
                </span>
            </h1>
            <div class="flex items-center space-x-4">
                <div class="h-px bg-primary w-12"></div>
                <span class="text-sm tracking-[0.2em] uppercase font-medium text-gray-400">Portail Institutionnel</span>
            </div>
        </div>
    </div>

    {# Right side - Form #}
    <div class="w-full md:w-1/2 flex items-center justify-center p-8 md:p-24 z-10 transition-all duration-1000 ease-out translate-x-full opacity-0" id="register-form-side">
        <div class="w-full max-w-md">
            <h2 class="text-4xl font-semibold mb-3">Créez votre compte</h2>
            <p class="text-gray-400 mb-10 font-light">Inscrivez votre institution pour accéder à notre suite de gestion.</p>

            {% if error %}
                <div class="mb-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20 text-red-400 text-sm">
                    {{ error }}
                </div>
            {% endif %}

            <form method="post" action="{{ path('app_register') }}" class="space-y-8">
                <div class="flex gap-5">
                    <div class="input-group flex-1">
                        <label class="block text-[10px] tracking-widest uppercase text-gray-500 mb-1 font-semibold">Nom</label>
                        <input id="name" name="name" value="{{ last_name }}" placeholder="Akane" required type="text" class="input-underline"/>
                        <span class="input-focus-line"></span>
                    </div>
                    <div class="input-group flex-1">
                        <label class="block text-[10px] tracking-widest uppercase text-gray-500 mb-1 font-semibold">Prénom</label>
                        <input id="first_name" name="first_name" placeholder="Nigasaki" required type="text" class="input-underline"/>
                        <span class="input-focus-line"></span>
                    </div>
                </div>

                <div class="input-group">
                    <label class="block text-[10px] tracking-widest uppercase text-gray-500 mb-1 font-semibold">Adresse email</label>
                    <input id="email" name="email" value="{{ last_email }}" placeholder="akanenigasaki@gmail.com" required type="email" class="input-underline"/>
                    <span class="input-focus-line"></span>
                </div>

                <div class="input-group">
                    <label class="block text-[10px] tracking-widest uppercase text-gray-500 mb-1 font-semibold">Mot de passe</label>
                    <div class="relative">
                        <input id="password" name="password" placeholder="••••••••••••" required minlength="6" type="password" class="input-underline pr-12" autocomplete="off"/>
                        <button type="button" 
                                onclick="togglePasswordVisibility('password', 'password-icon')"
                                class="absolute top-4 right-2 text-gray-500 hover:text-white transition-colors focus:outline-none">
                            <i id="password-icon" data-lucide="eye-off" class="w-[18px] h-[18px]"></i>
                        </button>
                    </div>
                    <span class="input-focus-line"></span>
                    <small class="text-xs text-slate-500 mt-1">Au moins 6 caractères</small>
                </div>

                <div class="input-group">
                    <label class="block text-[10px] tracking-widest uppercase text-gray-500 mb-1 font-semibold">Confirmer le mot de passe</label>
                    <div class="relative">
                        <input id="password_confirm" name="password_confirm" placeholder="••••••••••••" required type="password" class="input-underline pr-12"/>
                        <button type="button" 
                                onclick="togglePasswordVisibility('password_confirm', 'password-confirm-icon')"
                                class="absolute top-4 right-2 text-gray-500 hover:text-white transition-colors focus:outline-none">
                            <i id="password-confirm-icon" data-lucide="eye-off" class="w-[18px] h-[18px]"></i>
                        </button>
                    </div>
                    <span class="input-focus-line"></span>
                </div>
                
                <button class="w-full btn-primary uppercase tracking-widest text-sm bg-[#7C3AED] py-3 rounded-full" type="submit">
                    S'inscrire
                </button>
            </form>
            <div class="mt-12 text-center">
                <p class="text-sm text-gray-500 font-light">
                    Vous avez déjà un compte?
                    <a class="font-bold text-white hover:text-primary transition-colors ml-2 hover:underline relative inline-block group" href="{{ path('app_login') }}">
                        Connectez-vous ici
                        <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-primary group-hover:w-full transition-all duration-300"></span>
                    </a>
                </p>
            </div>
        </div>
    </div>
</div>

<script>
    function togglePasswordVisibility(inputId, iconId) {
        const input = document.getElementById(inputId);
        const icon = document.getElementById(iconId);
        
        if (input.type === 'password') {
            input.type = 'text';
            icon.setAttribute('data-lucide', 'eye');
        } else {
            input.type = 'password';
            icon.setAttribute('data-lucide', 'eye-off');
        }
        
        // Refresh lucide icons
        lucide.createIcons();
    }

    // Entrance animation
    document.addEventListener('DOMContentLoaded', () => {
        setTimeout(() => {
            document.getElementById('register-form-side').classList.remove('translate-x-full', 'opacity-0');
            document.getElementById('register-form-side').classList.add('translate-x-0', 'opacity-100');
            
            const imageSide = document.getElementById('register-image-side');
            if (imageSide) {
                imageSide.classList.remove('-translate-x-full', 'opacity-0');
                imageSide.classList.add('translate-x-0', 'opacity-100');
            }
        }, 100);
    });
</script>
{% endblock %}
